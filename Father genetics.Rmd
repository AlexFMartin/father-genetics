---
title: "Father genetics"
author: "Alex Martin"
date: "21/04/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

## 1. Data cleaning
### Load packages
```{r}
# Install libraries
renv::restore(prompt = F)
library(haven)
library(tidyverse)
# instal packages using install.packages("") in the console then
# renv::snapshot()
```


### Merge and save data 
```{r, eval = F}
df.paper3 <- read_spss("data/shuffled data.sav")
df.pgrChild <- read_csv("data/shuffled data pgrChild.csv")

# merge PRS data
df.paper3 <- left_join(
  df.paper3 %>% as_tibble(),
  df.pgrChild %>% as_tibble(),
  by = c("cidB2677", "qlet")
)

# save variables for analysis
df.paper3 <- df.paper3 %>%
  select(
    id = cidB2677,
    sex = kz021,
    birthOrder = qlet,
    childPRS = PRS_int
  )
write_csv(df.paper3, "data/filtered data.csv")
```

```{r}
# Load data
df.paper3 <- read_csv("data/filtered data.csv") %>%
  as_tibble(df.paper3)
```

### Check variables, recode including NAs


## 2. Included sample

### Check missing

### Constrain sample
remove twins/triplets

### Sample size calc
https://www.danielsoper.com/statcalc/calculator.aspx?id=89

## 3. Create new variables

### Parental warmth

### Parental control

### Household chaos
Confirmatory factor analysis

### Internalising

#### - 4y

#### - 16y


## 4. Descriptives

### Means and distributions

### Correlations


## 5. Included v excluded


## 6. SEM testing

### Model 1


### Model 2


### Model 3